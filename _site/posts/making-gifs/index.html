<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale=1.0">
    <title>Making quick &amp; easy gifs for pull requests (Linux)</title>
    <meta name="description" content="Quick quide on recording gifs from your screen in Linux.">
    <link rel="stylesheet" href="/css/typography.css">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <header class="blog-header">
      <h3 class="home"><a class="title" href="/">nikbrendler.com</a></h3>
      <nav class="pages">
        <a href="/projects/">projects</a>
      </nav>
      <nav class="social">
        <a href="https://github.com/nbrendler">
          <img src="/img/github.png" />
        </a>
        <a href="https://twitter.com/NikBrendler">
          <img src="/img/twitter.png" />
        </a>
      </nav>
    </header>
    <main>
    <h1>Making quick &amp; easy gifs for pull requests (Linux)</h1>

<p>I often like to make gifs for visual changes to software and include them in
pull requests, chat programs (or blog posts) to help illustrate the nature of
the change.</p>
<p>It's a simple enough thing to do with the right tools, and can add a lot to the
discussion, whether it's adding context to bugs, showcasing new features or just
having fun.</p>
<h1>Recording the screen</h1>
<p>I prefer to use <a href="https://github.com/phw/peek">peek</a>, although the Arch wiki
lists plenty of <a href="https://wiki.archlinux.org/index.php/Screen_capture#Screencast_software">screencast
software</a>,
which should be up to the task in some capacity. Examples here will be using
<code>peek</code>.</p>
<p>Peek is a GUI program and is not scriptable. For a more scriptable cli option,
check out <a href="https://github.com/lolilolicon/FFcast">FFCast</a>.</p>
<p>After opening <code>peek</code>, you should see a window like this:</p>
<p><img src="/img/peek.png" alt="Peek window"></p>
<p>You can resize the window and position it over the region of the screen you wish
to make a recording of, and hit the record button. When you're done, press the
button again to stop.</p>
<p>There's a few preferences that may be of interest:</p>
<ul>
<li>You can record as GIF, MP4, APNG, or WebM</li>
<li>Hiding the mouse cursor in output.</li>
<li>Set a keyboard shortcut to stop recording, so you don't see the cursor flying
towards the stop button.</li>
<li>Change the framerate. 10 FPS could be overkill for simple UI gifs.</li>
</ul>
<h1>Processing the output</h1>
<p>I used <code>peek</code> as is for a while, but recently got curious about how I can easily
make the output smaller without sacrificing too much fidelity of the image.
Recording a large enough screen with the default 10 FPS can result in some
pretty large files.</p>
<p>To edit or resize you can use <a href="https://github.com/kohler/gifsicle">gifsicle</a>. It
has a nice intuitive API and can make the gifs quite small.</p>
<pre><code># Resize so that the width is 800, '_' will vary the height depending on the
# aspect ratio
gifsicle --resize 800x_ my_gif.gif &gt; my_gif_resized.gif
</code></pre>
<p>Note: If you're creating assets for the web, mp4 is preferable because it
<a href="https://dougsillars.com/2017/04/12/animated-gifs-vs-video-files/">compresses better than
gif</a>. So if
you record as mp4, you can resize using <code>ffmpeg</code> like this:</p>
<pre><code># Resizing an mp4 file to frame width 600, preserving aspect ratio
ffmpeg -i input.mp4 -vf scale=600:-1 output.mp4
</code></pre>
<h1>Example</h1>
<p><img src="/img/making_a_gif.gif" alt="Making a gif"></p>
<p>The result!</p>
<p><img src="/img/result.gif" alt="Result"></p>


<hr>
<ul><li>Next: <a href="/kernel-status-script">Kernel status script</a></li><li>Previous: <a href="/posts/on-arch-linux/">Developing on Arch Linux</a></li>
</ul>

    </main>
  </body>
</html>
